<div class="container" *ngIf="post">
  <div class="header">
    <div class="post__date">{{ post.date_posted | date: 'dd-MMM-yyyy hh-mm-ss' }}</div>
    <div class="icons__wrapper">
      <img src="../../../assets/img/editIcon.svg" alt="edit" class="icon" (click)="editToggle()" />
      <img src="../../../assets/img/deleteIcon.svg" alt="edit" class="icon" (click)="toggleDeletePopup()" />
    </div>
    <div class="post__credentials">
      <span class="post__group" [routerLink]="['/home/group', post.group.id]">
        {{ post.group.name }}
      </span>
      <div class="post__user">
        <span>{{ post.owner.first_name }} {{ post.owner.last_name }}</span>
        <img [src]="'http://127.0.0.1:8000' + post.owner.image" [routerLink]="['/home/profile/' + post.owner.id]" />
      </div>
    </div>
  </div>
  <div class="post__content" *ngIf="!postEditing; else form">
    <div class="post__content__text">
      {{ post.content }}
    </div>
    <div class="post__files">
      <div class="post__image" *ngIf="post.image">
        <img [src]="'http://127.0.0.1:8000' + post.image" />
      </div>
    </div>
  </div>

  <ng-template #form>
    <form class="form-group" (ngSubmit)="submitPostEdit()" [formGroup]="editPostForm">
        <textarea class="form-group__input" formControlName="content"></textarea>
      <label>
        File:
        <input type="file" (change)="postFileChange($event)" formControlName="file" />
      </label>
      <label>
        Image:
        <input type="file" accept="image/*" (change)="postImageChange($event)" formControlName="image" />
      </label>
      <button type="submit">Save</button>
    </form>
  </ng-template>

  <div *ngIf="postDeleting" class="confirmation">
    <div class="caption__wrapper">
      Are you sure about deleting this post?
    </div>
    <div class="button__wrapper">
      <button class="approve" (click)="deletePost()">yes</button>
      <button class="decline" (click)="toggleDeletePopup()">no</button>
    </div>
  </div>

  <div class="post__comments">
    <div class="comment__form">
      <form [formGroup]="commentForm" (ngSubmit)="addComment()">
        <textarea class="textarea" formControlName="content"></textarea>
        <div class="bottom__form">
          <input type="file" class="load-file" accept="image/*" style="color: white;" (change)="onFileSelected($event)" />
          <button type="submit" class="add-comment__button">Add comment</button>
        </div>
      </form>
    </div>
    <div class="comment" *ngFor="let comment of comments">
      <div class="comment__user">
        <img [src]="'http://127.0.0.1:8000' + comment.owner.image" />
        <div class="comment__date">{{ comment.date_commented | date: 'dd-MMM-yyyy hh-mm-ss' }}</div>
      </div>
      <div class="comment__credentials">
        <div class="comment__header">
          <span>{{ comment.owner.first_name }} {{ comment.owner.last_name }}</span>
        </div>
        <div class="comment__content">
          {{ comment.content }}
        </div>
        <div class="comment__files">
          <div class="comment__file" *ngIf="comment.file">
            <img [src]="'http://127.0.0.1:8000' + comment.file" />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
